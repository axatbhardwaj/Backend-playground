type Transfer @entity(immutable: true) {
  id: Bytes!
  from: Bytes! # address
  to: Bytes! # address
  value: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type TransferTimeseries @entity(timeseries: true) {
  id: Int8! # Timeseries entities require Int8 id
  timestamp: Timestamp! # Timeseries entities require timestamp field
  from: Bytes! # address
  to: Bytes! # address
  value: BigInt! # uint256
  blockNumber: BigInt!
  transactionHash: Bytes!
}

# https://github.com/graphprotocol/graph-node/blob/master/docs/aggregations.md#:~:text=intervals%3A%20a%20non%2Dempty%20array%20of%20intervals%3B%20currently%2C%20only%20hour%20and%20day%20are%20supported
type TransferAggregation
  @aggregation(
    intervals: ["hour", "day"]
    source: "TransferTimeseries"
    dimensions: ["from", "to"]
  ) {
  id: Int8!
  timestamp: Timestamp!
  from: Bytes!
  to: Bytes!
  totalVolume: BigInt! @aggregate(fn: "sum", arg: "value")
  transferCount: Int! @aggregate(fn: "count")
}
