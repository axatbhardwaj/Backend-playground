type Transfer @entity(immutable: true) {
  id: Bytes!
  from: Bytes! # address
  to: Bytes! # address
  value: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type TransferTimeseries @entity(timeseries: true) {
  id: Int8! # Timeseries entities require Int8 id
  timestamp: Timestamp! # Timeseries entities require timestamp field
  from: Bytes! # address
  to: Bytes! # address
  value: BigInt! # uint256
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type TransferAggregation
  @aggregation(
    intervals: ["hour", "day", "year", "month"]
    source: "TransferTimeseries"
    dimensions: ["from", "to"]
  ) {
  id: Int8!
  timestamp: Timestamp!
  from: Bytes!
  to: Bytes!
  totalVolume: BigInt! @aggregate(fn: "sum", arg: "value")
  transferCount: Int! @aggregate(fn: "count")
}
